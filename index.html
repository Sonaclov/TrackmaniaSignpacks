<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trackmania Checkpoint Signpack Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Core fonts loaded first -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@100;300;400;500;700;900&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Open+Sans:wght@300;400;500;600;700;800&family=Lato:wght@100;300;400;700;900&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <!-- Display fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Exo+2:wght@100;200;300;400;500;600;700;800;900&family=Audiowide&family=Bungee&family=Impact&family=Anton&family=Oswald:wght@200;300;400;500;600;700&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <!-- Gaming fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Black+Ops+One&family=Russo+One&family=Racing+Sans+One&family=Staatliches&family=Bebas+Neue&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <!-- Decorative fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Creepster&family=Nosifer&family=Monoton&family=Faster+One&family=Alfa+Slab+One&family=Righteous&family=Bangers&family=Fredoka+One&family=Squada+One&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <!-- Script fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Pacifico&family=Dancing+Script:wght@400;500;600;700&family=Great+Vibes&family=Shadows+Into+Light&family=Caveat:wght@400;500;600;700&family=Kalam:wght@300;400;700&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <!-- Technical fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100;200;300;400;500;600;700;800&family=Fira+Code:wght@300;400;500;600;700&family=Share+Tech+Mono&family=Electrolize&family=Michroma&family=Iceland&family=Chakra+Petch:wght@300;400;500;600;700&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">

    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@100;300;400;500;700;900&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Open+Sans:wght@300;400;500;600;700;800&family=Lato:wght@100;300;400;700;900&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Exo+2:wght@100;200;300;400;500;600;700;800;900&family=Audiowide&family=Bungee&family=Impact&family=Anton&family=Oswald:wght@200;300;400;500;600;700&family=Press+Start+2P&family=Black+Ops+One&family=Russo+One&family=Racing+Sans+One&family=Staatliches&family=Bebas+Neue&display=swap" rel="stylesheet">
    </noscript>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            select option {
            /* Forcing black text to be visible on the default white dropdown background */
            color: #000000 !important; 
            background: #ffffff; 
        }

        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Toolbar Styles */
        .toolbar {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        .toolbar-group {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 12px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toolbar-group:last-child {
            border-right: none;
            margin-left: auto;
        }

        .toolbar-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #ffffff;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85em;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-btn:hover {
            background: rgba(79, 172, 254, 0.2);
            border-color: rgba(79, 172, 254, 0.5);
        }

        .toolbar-btn.active {
            background: rgba(79, 172, 254, 0.3);
            border-color: #4facfe;
            color: #4facfe;
        }

        .main-workspace {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .properties-panel {
            width: 320px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            border-right: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            font-size: 0.85em;
            font-weight: 500;
        }

        .panel-tab:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .panel-tab.active {
            background: rgba(79, 172, 254, 0.15);
            border-bottom-color: #4facfe;
            color: #4facfe;
        }

        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .main-canvas {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.3);
        }

        .canvas-header {
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .canvas-header h2 {
            font-size: 1.5em;
            font-weight: 600;
        }

        .preview-area {
            flex: 1;
            display: flex;
            gap: 20px;
            padding: 20px;
            overflow: hidden;
        }

        .preview-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .preview-row {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .preview-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .tab-panel {
            display: block;
        }

        /* Themes Modal */
        .themes-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .themes-modal-content {
            background: rgba(0, 0, 0, 0.95);
            border-radius: 12px;
            padding: 24px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .themes-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .themes-modal-header h3 {
            margin: 0;
            color: #4facfe;
            font-size: 1.2em;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #ffffff;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: rgba(255, 0, 0, 0.2);
        }

        .themes-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .theme-card {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: #ffffff;
            font-size: 0.85em;
        }

        .theme-card:hover {
            background: rgba(79, 172, 254, 0.2);
            border-color: #4facfe;
            transform: translateY(-2px);
        }

        .theme-card i {
            font-size: 1.5em;
            color: #4facfe;
        }

        @media (max-width: 600px) {
            .themes-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .themes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .tool-group {
            margin-bottom: 20px;
        }

        .tool-group-header {
            background: rgba(255, 255, 255, 0.08);
            padding: 10px 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.85em;
            color: #4facfe;
            border-left: 3px solid #4facfe;
        }

        .tool-section {
            background: rgba(255, 255, 255, 0.04);
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .tool-header {
            background: transparent;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 500;
            font-size: 0.85em;
            border-radius: 6px;
        }

        .tool-header:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .tool-header:focus {
            outline: 1px solid #4facfe;
            outline-offset: -1px;
        }

        .tool-header.active {
            background: rgba(79, 172, 254, 0.15);
            color: #4facfe;
        }


        .tool-header i {
            margin-right: 10px;
            width: 16px;
            text-align: center;
        }

        .tool-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
        }

        .tool-content.active {
            max-height: 2000px;
            padding: 24px 20px;
            opacity: 1;
        }

        .form-group {
            margin-bottom: 22px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #e0e0e0;
            font-size: 0.9em;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .color-input {
            height: 40px;
            cursor: pointer;
            padding: 2px;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .range-container input[type="range"] {
            flex: 1;
        }

        .range-value {
            min-width: 50px;
            text-align: center;
            background: rgba(79, 172, 254, 0.2);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .theme-btn {
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85em;
            font-weight: 500;
        }

        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        .main-header {
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .main-header h2 {
            font-size: 1.5em;
            font-weight: 600;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }


        .preview-area::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(79, 172, 254, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .preview-canvas {
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            background: white;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 1;
            margin-bottom: 8px;
        }

        .preview-label {
            text-align: center;
            font-size: 0.8em;
            color: #bdc3c7;
            margin-bottom: 10px;
        }

        .preview-examples {
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .preview-info {
            margin-top: 15px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .preview-info h3 {
            font-size: 1em;
            margin-bottom: 5px;
            color: #4facfe;
        }

        .preview-info p {
            opacity: 0.8;
            font-size: 0.8em;
        }

        .stats-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .stats-section {
            margin-bottom: 20px;
        }

        .stats-section h4 {
            color: #4facfe;
            margin-bottom: 12px;
            font-size: 1em;
            font-weight: 600;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-size: 0.8em;
            opacity: 0.8;
        }

        .stat-value {
            font-weight: 600;
            font-size: 0.8em;
            color: #4facfe;
        }

        .progress-container {
            position: fixed;
            bottom: 20px;
            left: 420px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            z-index: 1000;
        }

        .progress-container.active {
            display: block;
        }

        .progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .status {
            text-align: center;
            font-weight: 500;
            color: #e0e0e0;
        }

        .download-section {
            background: linear-gradient(135deg, #00c851, #007e33);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }

        .download-section.active {
            display: block;
        }

        .download-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .download-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        /* Preset Management */
        .preset-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preset-actions {
            display: flex;
            gap: 8px;
        }

        .preset-btn {
            background: rgba(79, 172, 254, 0.2);
            color: #4facfe;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: rgba(79, 172, 254, 0.4);
        }

        /* Animation Controls */
        .animation-preview {
            margin-top: 15px;
            text-align: center;
        }

        .animation-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .anim-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .anim-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .anim-btn.active {
            background: #4facfe;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .sidebar {
                width: 55%;
                min-width: 380px;
            }

            .main-workspace {
                grid-template-columns: 35% 10%;
            }
        }

        @media (max-width: 1000px) {
            .sidebar {
                width: 50%;
                min-width: 350px;
            }

            .main-workspace {
                grid-template-columns: 40% 10%;
                gap: 10px;
                padding: 15px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: 60vh;
                min-width: unset;
            }

            .main-content {
                height: 40vh;
            }

            .main-workspace {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
                padding: 10px;
            }

            .progress-container {
                left: 20px;
            }

            .sidebar-header {
                padding: 20px;
            }

            .sidebar-header h1 {
                font-size: 1.2em;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                height: 65vh;
            }

            .main-content {
                height: 35vh;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .button-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar Styling */
        .sidebar::-webkit-scrollbar,
        .stats-panel::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track,
        .stats-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .sidebar::-webkit-scrollbar-thumb,
        .stats-panel::-webkit-scrollbar-thumb {
            background: rgba(79, 172, 254, 0.5);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover,
        .stats-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(79, 172, 254, 0.7);
        }

        /* Special Effect Indicators */
        .effect-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .effect-indicator.active {
            opacity: 1;
            box-shadow: 0 0 10px currentColor;
        }

        .effect-indicator.hologram { background: linear-gradient(45deg, #ff0080, #00ff80, #8000ff); }
        .effect-indicator.neon { background: #00ff41; }
        .effect-indicator.metallic { background: linear-gradient(45deg, #c0c0c0, #808080); }
        .effect-indicator.chrome { background: linear-gradient(45deg, #f0f0f0, #a0a0a0); }

        /* Font Preview Styles */
        #fontFamily option[value="Arial"] { font-family: Arial, sans-serif; }
        #fontFamily option[value="Impact"] { font-family: Impact, sans-serif; }
        #fontFamily option[value="Georgia"] { font-family: Georgia, serif; }
        #fontFamily option[value="Verdana"] { font-family: Verdana, sans-serif; }
        #fontFamily option[value="Times New Roman"] { font-family: "Times New Roman", serif; }
        #fontFamily option[value="Courier New"] { font-family: "Courier New", monospace; }
        #fontFamily option[value="Inter"] { font-family: "Inter", sans-serif; }
        #fontFamily option[value="Roboto"] { font-family: "Roboto", sans-serif; }
        #fontFamily option[value="Poppins"] { font-family: "Poppins", sans-serif; }
        #fontFamily option[value="Montserrat"] { font-family: "Montserrat", sans-serif; }
        #fontFamily option[value="Open Sans"] { font-family: "Open Sans", sans-serif; }
        #fontFamily option[value="Lato"] { font-family: "Lato", sans-serif; }
        #fontFamily option[value="Source Sans Pro"] { font-family: "Source Sans Pro", sans-serif; }
        #fontFamily option[value="Raleway"] { font-family: "Raleway", sans-serif; }
        #fontFamily option[value="Ubuntu"] { font-family: "Ubuntu", sans-serif; }
        #fontFamily option[value="Nunito"] { font-family: "Nunito", sans-serif; }
        #fontFamily option[value="Fira Sans"] { font-family: "Fira Sans", sans-serif; }
        #fontFamily option[value="Work Sans"] { font-family: "Work Sans", sans-serif; }
        #fontFamily option[value="Barlow"] { font-family: "Barlow", sans-serif; }
        #fontFamily option[value="Rubik"] { font-family: "Rubik", sans-serif; }
        #fontFamily option[value="DM Sans"] { font-family: "DM Sans", sans-serif; }
        #fontFamily option[value="Lexend"] { font-family: "Lexend", sans-serif; }
        #fontFamily option[value="Mulish"] { font-family: "Mulish", sans-serif; }
        #fontFamily option[value="Outfit"] { font-family: "Outfit", sans-serif; }
        #fontFamily option[value="Space Grotesk"] { font-family: "Space Grotesk", sans-serif; }
        #fontFamily option[value="IBM Plex Sans"] { font-family: "IBM Plex Sans", sans-serif; }
        #fontFamily option[value="Manrope"] { font-family: "Manrope", sans-serif; }
        #fontFamily option[value="Red Hat Display"] { font-family: "Red Hat Display", sans-serif; }
        #fontFamily option[value="Asap"] { font-family: "Asap", sans-serif; }
        #fontFamily option[value="Varela Round"] { font-family: "Varela Round", sans-serif; }
        #fontFamily option[value="Josefin Sans"] { font-family: "Josefin Sans", sans-serif; }
        #fontFamily option[value="Comfortaa"] { font-family: "Comfortaa", sans-serif; }
        #fontFamily option[value="Quicksand"] { font-family: "Quicksand", sans-serif; }
        #fontFamily option[value="Cabin"] { font-family: "Cabin", sans-serif; }
        #fontFamily option[value="Dosis"] { font-family: "Dosis", sans-serif; }
        #fontFamily option[value="PT Sans"] { font-family: "PT Sans", sans-serif; }
        #fontFamily option[value="Roboto Condensed"] { font-family: "Roboto Condensed", sans-serif; }
        #fontFamily option[value="Oswald"] { font-family: "Oswald", sans-serif; }
        #fontFamily option[value="Titillium Web"] { font-family: "Titillium Web", sans-serif; }
        #fontFamily option[value="Fjalla One"] { font-family: "Fjalla One", sans-serif; }
        #fontFamily option[value="Saira Condensed"] { font-family: "Saira Condensed", sans-serif; }
        #fontFamily option[value="Bebas Neue"] { font-family: "Bebas Neue", sans-serif; }
        #fontFamily option[value="Pathway Gothic One"] { font-family: "Pathway Gothic One", sans-serif; }
        #fontFamily option[value="Archivo"] { font-family: "Archivo", sans-serif; }
        #fontFamily option[value="Khand"] { font-family: "Khand", sans-serif; }
        #fontFamily option[value="Anton"] { font-family: "Anton", sans-serif; }
        #fontFamily option[value="Bungee"] { font-family: "Bungee", sans-serif; }
        #fontFamily option[value="Alfa Slab One"] { font-family: "Alfa Slab One", sans-serif; }
        #fontFamily option[value="Righteous"] { font-family: "Righteous", sans-serif; }
        #fontFamily option[value="Bangers"] { font-family: "Bangers", sans-serif; }
        #fontFamily option[value="Fredoka One"] { font-family: "Fredoka One", sans-serif; }
        #fontFamily option[value="Squada One"] { font-family: "Squada One", sans-serif; }
        #fontFamily option[value="Staatliches"] { font-family: "Staatliches", sans-serif; }
        #fontFamily option[value="Orbitron"] { font-family: "Orbitron", sans-serif; }
        #fontFamily option[value="Exo 2"] { font-family: "Exo 2", sans-serif; }
        #fontFamily option[value="Audiowide"] { font-family: "Audiowide", sans-serif; }
        #fontFamily option[value="Rajdhani"] { font-family: "Rajdhani", sans-serif; }
        #fontFamily option[value="Teko"] { font-family: "Teko", sans-serif; }
        #fontFamily option[value="Electrolize"] { font-family: "Electrolize", sans-serif; }
        #fontFamily option[value="Michroma"] { font-family: "Michroma", sans-serif; }
        #fontFamily option[value="Iceland"] { font-family: "Iceland", sans-serif; }
        #fontFamily option[value="Chakra Petch"] { font-family: "Chakra Petch", sans-serif; }
        #fontFamily option[value="Press Start 2P"] { font-family: "Press Start 2P", sans-serif; }
        #fontFamily option[value="Black Ops One"] { font-family: "Black Ops One", sans-serif; }
        #fontFamily option[value="Russo One"] { font-family: "Russo One", sans-serif; }
        #fontFamily option[value="Racing Sans One"] { font-family: "Racing Sans One", sans-serif; }
        #fontFamily option[value="Share Tech Mono"] { font-family: "Share Tech Mono", monospace; }
        #fontFamily option[value="JetBrains Mono"] { font-family: "JetBrains Mono", monospace; }
        #fontFamily option[value="Fira Code"] { font-family: "Fira Code", monospace; }
        #fontFamily option[value="Kanit"] { font-family: "Kanit", sans-serif; }
        #fontFamily option[value="Playfair Display"] { font-family: "Playfair Display", serif; }
        #fontFamily option[value="Merriweather"] { font-family: "Merriweather", serif; }
        #fontFamily option[value="Crimson Text"] { font-family: "Crimson Text", serif; }
        #fontFamily option[value="Libre Baskerville"] { font-family: "Libre Baskerville", serif; }
        #fontFamily option[value="Zilla Slab"] { font-family: "Zilla Slab", serif; }
        #fontFamily option[value="Monoton"] { font-family: "Monoton", sans-serif; }
        #fontFamily option[value="Faster One"] { font-family: "Faster One", sans-serif; }
        #fontFamily option[value="Permanent Marker"] { font-family: "Permanent Marker", sans-serif; }
        #fontFamily option[value="Creepster"] { font-family: "Creepster", sans-serif; }
        #fontFamily option[value="Nosifer"] { font-family: "Nosifer", sans-serif; }
        #fontFamily option[value="Lobster"] { font-family: "Lobster", sans-serif; }
        #fontFamily option[value="Pacifico"] { font-family: "Pacifico", sans-serif; }
        #fontFamily option[value="Dancing Script"] { font-family: "Dancing Script", sans-serif; }
        #fontFamily option[value="Great Vibes"] { font-family: "Great Vibes", sans-serif; }
        #fontFamily option[value="Shadows Into Light"] { font-family: "Shadows Into Light", sans-serif; }
        #fontFamily option[value="Caveat"] { font-family: "Caveat", sans-serif; }
        #fontFamily option[value="Kalam"] { font-family: "Kalam", sans-serif; }

        /* Lock button styles */
        .lock-btn {
            background: transparent;
            border: 1px solid #4a5568;
            color: #bdc3c7;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
            min-width: 32px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lock-btn:hover {
            background: rgba(79, 172, 254, 0.1);
            border-color: #4facfe;
            color: #4facfe;
        }

        .lock-btn.locked {
            background: rgba(255, 193, 7, 0.2);
            border-color: #ffc107;
            color: #ffc107;
        }

        .lock-btn.locked:hover {
            background: rgba(255, 193, 7, 0.3);
        }

        .form-group-with-lock {
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .form-group-with-lock > div:first-child {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-group">
                <h2 style="margin: 0; font-size: 1.1em;"><i class="fas fa-magic"></i> Trackmania Signpack Generator</h2>
            </div>

            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="randomizeAll()">
                    <i class="fas fa-random"></i> Randomize
                </button>
                <button class="toolbar-btn" onclick="toggleThemesModal()">
                    <i class="fas fa-swatchbook"></i> Themes
                </button>
            </div>

            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="savePreset()">
                    <i class="fas fa-save"></i> Save
                </button>
                <button class="toolbar-btn" onclick="loadPreset()">
                    <i class="fas fa-folder-open"></i> Load
                </button>
                <button class="toolbar-btn" onclick="exportSettings()">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>

            <div class="toolbar-group">
                <button id="generateBtn" class="toolbar-btn" onclick="generateSignpack()" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); font-weight: bold;" disabled>
                    <i class="fas fa-spinner fa-spin"></i> Loading...
                </button>
                <button class="toolbar-btn" onclick="checkGenerator()" title="Debug: Check Generator Status" style="font-size: 0.8em;">
                    <i class="fas fa-bug"></i>
                </button>
                <button class="toolbar-btn" onclick="toggleHelpModal()" title="Help & Instructions">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </div>

        <!-- Themes Modal -->
        <div id="themesModal" class="themes-modal" style="display: none;">
            <div class="themes-modal-content">
                <div class="themes-modal-header">
                    <h3><i class="fas fa-swatchbook"></i> Choose a Theme</h3>
                    <button class="close-btn" onclick="toggleThemesModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="themes-grid">
                    <button class="theme-card" onclick="applyThemeAndCloseModal('racing')">
                        <i class="fas fa-flag-checkered"></i>
                        <span>Racing</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('cyber')">
                        <i class="fas fa-robot"></i>
                        <span>Cyber</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('neon')">
                        <i class="fas fa-bolt"></i>
                        <span>Neon</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('space')">
                        <i class="fas fa-rocket"></i>
                        <span>Space</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('military')">
                        <i class="fas fa-shield-alt"></i>
                        <span>Military</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('gold')">
                        <i class="fas fa-crown"></i>
                        <span>Gold</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('retro')">
                        <i class="fas fa-tv"></i>
                        <span>Retro</span>
                    </button>
                    <button class="theme-card" onclick="applyThemeAndCloseModal('matrix')">
                        <i class="fas fa-code"></i>
                        <span>Matrix</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="themes-modal" style="display: none;">
            <div class="themes-modal-content" style="max-width: 600px;">
                <div class="themes-modal-header">
                    <h3><i class="fas fa-question-circle"></i> Help & Instructions</h3>
                    <button class="close-btn" onclick="toggleHelpModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div style="max-height: 70vh; overflow-y: auto; padding-right: 10px;">
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-info-circle"></i> What is this?</h4>
                        <p style="margin-bottom: 15px; line-height: 1.6;">
                            This tool generates custom checkpoint signpacks for Trackmania. Create personalized signs with custom fonts, colors, effects and positioning.
                        </p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-cogs"></i> How to Use</h4>
                        <ol style="margin-left: 20px; line-height: 1.6;">
                            <li>Customize your sign style in the Basic, Style, and Effects tabs</li>
                            <li>Configure your signpack settings (prefix, number range, etc.)</li>
                            <li>Click "Generate Signpack" to create your PNG files</li>
                            <li>Upload the PNG files to a web server for use in maps</li>
                        </ol>
                    </div>

                    <div style="margin-bottom: 20px; background: rgba(79, 172, 254, 0.1); padding: 15px; border-radius: 6px; border-left: 3px solid #4facfe;">
                        <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-cloud-upload-alt"></i> Important: Web Hosting Required</h4>
                        <p style="margin-bottom: 10px; line-height: 1.6;">
                            <strong>For other players to see your signs:</strong> You must upload the PNG files to a web server. Local files only work for the map creator.
                        </p>
                        <p style="margin-bottom: 10px; line-height: 1.6;">
                            <strong>Recommended:</strong> <a href="https://dashmap.live" target="_blank" style="color: #4facfe; text-decoration: underline;">dashmap.live</a> - Simple drag & drop CDN hosting
                        </p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-map"></i> Installation Steps</h4>
                        <ol style="margin-left: 20px; line-height: 1.6;">
                            <li><strong>Generate</strong> your signpack ZIP file</li>
                            <li><strong>Extract</strong> the PNG files from the ZIP</li>
                            <li><strong>Upload</strong> PNG files to your web hosting service</li>
                            <li><strong>Copy</strong> the direct PNG URLs</li>
                            <li><strong>Use</strong> these URLs in Trackmania Map Editor for checkpoint signs</li>
                            <li><strong>Test</strong> your map to ensure signs load correctly</li>
                        </ol>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-file-archive"></i> Generated Files</h4>
                        <ul style="margin-left: 20px; line-height: 1.6;">
                            <li><strong>PNG files:</strong> Your custom checkpoint signs (ready to use)</li>
                            <li><strong>settings.json:</strong> Settings for re-importing (optional)</li>
                        </ul>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 6px; border-left: 3px solid #4caf50;">
                        <h4 style="color: #4caf50; margin-bottom: 10px;"><i class="fas fa-lightbulb"></i> Pro Tips</h4>
                        <ul style="margin-left: 20px; line-height: 1.6;">
                            <li>Use the lock buttons to prevent specific settings from randomizing</li>
                            <li>Test your PNG URLs in a browser before using in Trackmania</li>
                            <li>Keep file names short and simple for better compatibility</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-workspace">
            <!-- Properties Panel -->
            <div class="properties-panel">
                <div class="panel-tabs" role="tablist">
                    <div id="basic-tab" class="panel-tab active" role="tab" tabindex="0" aria-selected="true" onclick="switchTab('basic')" onkeydown="handleTabKeyDown(event, 'basic')">
                        <i class="fas fa-font"></i> Basic
                    </div>
                    <div id="style-tab" class="panel-tab" role="tab" tabindex="0" aria-selected="false" onclick="switchTab('style')" onkeydown="handleTabKeyDown(event, 'style')">
                        <i class="fas fa-palette"></i> Style
                    </div>
                    <div id="effects-tab" class="panel-tab" role="tab" tabindex="0" aria-selected="false" onclick="switchTab('effects')" onkeydown="handleTabKeyDown(event, 'effects')">
                        <i class="fas fa-magic"></i> Effects
                    </div>
                </div>

                <div class="panel-content">
                    <!-- Basic Tab -->
                    <div id="basic-panel" class="tab-panel" role="tabpanel" aria-labelledby="basic-tab">
                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-font"></i> Text Settings
                            </div>

                            <div class="form-group">
                                <label for="textPrefix">Text Prefix:</label>
                                <input type="text" id="textPrefix" value="Checkpoint" placeholder="e.g., Checkpoint, CP, Stage">
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="fontSize">Font Size:</label>
                                    <div class="range-container">
                                        <input type="range" id="fontSize" min="20" max="120" value="60">
                                        <span id="fontSizeValue" class="range-value">60px</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="fontWeight">Font Weight:</label>
                                    <select id="fontWeight">
                                        <option value="100">Thin</option>
                                        <option value="300">Light</option>
                                        <option value="400">Normal</option>
                                        <option value="600">Semi Bold</option>
                                        <option value="700" selected>Bold</option>
                                        <option value="900">Black</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group form-group-with-lock">
                                <div>
                                    <label for="fontFamily">Font Family:</label>
                                    <select id="fontFamily">
                                    <optgroup label="System Fonts">
                                        <option value="Arial">Arial</option>
                                        <option value="Impact">Impact</option>
                                        <option value="Georgia">Georgia</option>
                                        <option value="Verdana">Verdana</option>
                                        <option value="Times New Roman">Times New Roman</option>
                                        <option value="Courier New">Courier New</option>
                                    </optgroup>
                                    <optgroup label="Modern Sans-Serif">
                                        <option value="Inter">Inter</option>
                                        <option value="Roboto">Roboto</option>
                                        <option value="Poppins">Poppins</option>
                                        <option value="Montserrat">Montserrat</option>
                                        <option value="Open Sans">Open Sans</option>
                                        <option value="Lato">Lato</option>
                                        <option value="Source Sans Pro">Source Sans Pro</option>
                                        <option value="Raleway">Raleway</option>
                                        <option value="Ubuntu">Ubuntu</option>
                                        <option value="Nunito">Nunito</option>
                                        <option value="Fira Sans">Fira Sans</option>
                                        <option value="Work Sans">Work Sans</option>
                                        <option value="Barlow">Barlow</option>
                                        <option value="Rubik">Rubik</option>
                                        <option value="DM Sans">DM Sans</option>
                                        <option value="Lexend">Lexend</option>
                                        <option value="Mulish">Mulish</option>
                                        <option value="Outfit">Outfit</option>
                                        <option value="Space Grotesk">Space Grotesk</option>
                                        <option value="IBM Plex Sans">IBM Plex Sans</option>
                                        <option value="Manrope">Manrope</option>
                                        <option value="Red Hat Display">Red Hat Display</option>
                                        <option value="Asap">Asap</option>
                                        <option value="Varela Round">Varela Round</option>
                                        <option value="Josefin Sans">Josefin Sans</option>
                                        <option value="Comfortaa">Comfortaa</option>
                                        <option value="Quicksand">Quicksand</option>
                                        <option value="Cabin">Cabin</option>
                                        <option value="Dosis">Dosis</option>
                                        <option value="PT Sans">PT Sans</option>
                                    </optgroup>
                                    <optgroup label="Condensed & Narrow">
                                        <option value="Roboto Condensed">Roboto Condensed</option>
                                        <option value="Oswald">Oswald</option>
                                        <option value="Titillium Web">Titillium Web</option>
                                        <option value="Fjalla One">Fjalla One</option>
                                        <option value="Saira Condensed">Saira Condensed</option>
                                        <option value="Bebas Neue">Bebas Neue</option>
                                        <option value="Pathway Gothic One">Pathway Gothic One</option>
                                        <option value="Archivo">Archivo</option>
                                        <option value="Khand">Khand</option>
                                    </optgroup>
                                    <optgroup label="Bold & Display">
                                        <option value="Anton">Anton</option>
                                        <option value="Bungee">Bungee</option>
                                        <option value="Alfa Slab One">Alfa Slab One</option>
                                        <option value="Righteous">Righteous</option>
                                        <option value="Bangers">Bangers</option>
                                        <option value="Fredoka One">Fredoka One</option>
                                        <option value="Squada One">Squada One</option>
                                        <option value="Staatliches">Staatliches</option>
                                    </optgroup>
                                    <optgroup label="Futuristic & Tech">
                                        <option value="Orbitron">Orbitron</option>
                                        <option value="Exo 2">Exo 2</option>
                                        <option value="Audiowide">Audiowide</option>
                                        <option value="Rajdhani" selected>Rajdhani</option>
                                        <option value="Teko">Teko</option>
                                        <option value="Electrolize">Electrolize</option>
                                        <option value="Michroma">Michroma</option>
                                        <option value="Iceland">Iceland</option>
                                        <option value="Chakra Petch">Chakra Petch</option>
                                    </optgroup>
                                    <optgroup label="Gaming & Retro">
                                        <option value="Press Start 2P">Press Start 2P</option>
                                        <option value="Black Ops One">Black Ops One</option>
                                        <option value="Russo One">Russo One</option>
                                        <option value="Racing Sans One">Racing Sans One</option>
                                    </optgroup>
                                    <optgroup label="Monospace">
                                        <option value="Share Tech Mono">Share Tech Mono</option>
                                        <option value="JetBrains Mono">JetBrains Mono</option>
                                        <option value="Fira Code">Fira Code</option>
                                    </optgroup>
                                    <optgroup label="Serif">
                                        <option value="Kanit">Kanit</option>
                                        <option value="Playfair Display">Playfair Display</option>
                                        <option value="Merriweather">Merriweather</option>
                                        <option value="Crimson Text">Crimson Text</option>
                                        <option value="Libre Baskerville">Libre Baskerville</option>
                                        <option value="Zilla Slab">Zilla Slab</option>
                                    </optgroup>
                                    <optgroup label="Decorative">
                                        <option value="Monoton">Monoton</option>
                                        <option value="Faster One">Faster One</option>
                                        <option value="Permanent Marker">Permanent Marker</option>
                                        <option value="Creepster">Creepster</option>
                                        <option value="Nosifer">Nosifer</option>
                                    </optgroup>
                                    <optgroup label="Script & Handwriting">
                                        <option value="Lobster">Lobster</option>
                                        <option value="Pacifico">Pacifico</option>
                                        <option value="Dancing Script">Dancing Script</option>
                                        <option value="Great Vibes">Great Vibes</option>
                                        <option value="Shadows Into Light">Shadows Into Light</option>
                                        <option value="Caveat">Caveat</option>
                                        <option value="Kalam">Kalam</option>
                                    </optgroup>
                                </select>
                                </div>
                                <button type="button" class="lock-btn" id="lockFontFamily" title="Lock/Unlock from randomizer">
                                    <i class="fas fa-lock-open"></i>
                                </button>
                            </div>

                            <div class="form-group form-group-with-lock">
                                <div>
                                    <label for="textColor">Text Color:</label>
                                    <input type="color" id="textColor" value="#ffffff">
                                </div>
                                <button type="button" class="lock-btn" id="lockTextColor" title="Lock/Unlock from randomizer">
                                    <i class="fas fa-lock-open"></i>
                                </button>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="textTransform">Text Transform:</label>
                                    <select id="textTransform">
                                        <option value="none">None</option>
                                        <option value="uppercase">UPPERCASE</option>
                                        <option value="lowercase">lowercase</option>
                                        <option value="capitalize">Capitalize</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="letterSpacing">Letter Spacing:</label>
                                    <div class="range-container">
                                        <input type="range" id="letterSpacing" min="-5" max="15" value="0">
                                        <span id="letterSpacingValue" class="range-value">0px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="textSkew">Text Skew:</label>
                                <div class="range-container">
                                    <input type="range" id="textSkew" min="-30" max="30" value="0">
                                    <span id="textSkewValue" class="range-value">0°</span>
                                </div>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="textHorizontalAlign">Horizontal Position:</label>
                                    <select id="textHorizontalAlign">
                                        <option value="left">Left</option>
                                        <option value="center" selected>Center</option>
                                        <option value="right">Right</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="textVerticalAlign">Vertical Position:</label>
                                    <select id="textVerticalAlign">
                                        <option value="top">High</option>
                                        <option value="middle" selected>Center</option>
                                        <option value="bottom">Low</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-square"></i> Sign Format
                            </div>

                            <div class="form-group">
                                <label for="signFormat">Sign Format:</label>
                                <select id="signFormat">
                                    <option value="6x1" selected>6x1 (512x80)</option>
                                    <option value="1x1">1x1 (1024x1024)</option>
                                    <option value="2x1">2x1 (1024x512)</option>
                                    <option value="4x1">4x1 (1024x256)</option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <!-- Style Tab -->
                    <div id="style-panel" class="tab-panel" role="tabpanel" aria-labelledby="style-tab" style="display: none;">
                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-palette"></i> Background
                            </div>

                            <div class="form-group form-group-with-lock">
                                <div>
                                    <label for="backgroundType">Background Type:</label>
                                    <select id="backgroundType">
                                        <option value="solid">Solid Color</option>
                                        <option value="linear">Linear Gradient</option>
                                        <option value="radial">Radial Gradient</option>
                                        <option value="pattern">Pattern</option>
                                        <option value="noise">Noise Texture</option>
                                        <option value="image">Custom Image</option>
                                    </select>
                                </div>
                                <button type="button" class="lock-btn" id="lockBackgroundType" title="Lock/Unlock from randomizer">
                                    <i class="fas fa-lock-open"></i>
                                </button>
                            </div>

                            <div class="form-group">
                                <label for="backgroundColor">Background Color:</label>
                                <input type="color" id="backgroundColor" value="#1a1a1a">
                            </div>

                            <div class="form-group" id="gradientOptions" style="display: none;">
                                <div class="form-row">
                                    <div>
                                        <label for="gradientColor1">Color 1:</label>
                                        <input type="color" id="gradientColor1" value="#667eea">
                                    </div>
                                    <div>
                                        <label for="gradientColor2">Color 2:</label>
                                        <input type="color" id="gradientColor2" value="#764ba2">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="gradientAngle">Gradient Angle:</label>
                                    <div class="range-container">
                                        <input type="range" id="gradientAngle" min="0" max="360" value="45">
                                        <span id="gradientAngleValue" class="range-value">45°</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" id="patternOptions" style="display: none;">
                                <label for="patternType">Pattern Type:</label>
                                <select id="patternType">
                                    <option value="stripes">Stripes</option>
                                    <option value="checkerboard">Checkerboard</option>
                                    <option value="dots">Dots</option>
                                    <option value="waves">Waves</option>
                                    <option value="grid">Grid</option>
                                    <option value="hexagon">Hexagon</option>
                                    <option value="carbon">Carbon</option>
                                </select>

                                <div class="form-row" style="margin-top: 12px;">
                                    <div>
                                        <label for="patternColor">Pattern Color:</label>
                                        <input type="color" id="patternColor" value="#4facfe">
                                    </div>
                                    <div>
                                        <label for="patternSize">Pattern Size:</label>
                                        <div class="range-container">
                                            <input type="range" id="patternSize" min="10" max="100" value="20">
                                            <span id="patternSizeValue" class="range-value">20px</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" id="noiseOptions" style="display: none;">
                                <div class="form-row">
                                    <div>
                                        <label for="noiseIntensity">Noise Intensity:</label>
                                        <div class="range-container">
                                            <input type="range" id="noiseIntensity" min="0" max="100" value="20">
                                            <span id="noiseIntensityValue" class="range-value">20%</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label for="noiseScale">Noise Scale:</label>
                                        <div class="range-container">
                                            <input type="range" id="noiseScale" min="1" max="10" value="3">
                                            <span id="noiseScaleValue" class="range-value">3x</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" id="imageOptions" style="display: none;">
                                <label for="backgroundImage">Custom Background Image:</label>
                                <input type="file" id="backgroundImage" accept="image/*">

                                <div class="form-group" style="margin-top: 12px;">
                                    <label for="imageOpacity">Image Opacity:</label>
                                    <div class="range-container">
                                        <input type="range" id="imageOpacity" min="0" max="100" value="80">
                                        <span id="imageOpacityValue" class="range-value">80%</span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="imageBlendMode">Blend Mode:</label>
                                    <select id="imageBlendMode">
                                        <option value="normal">Normal</option>
                                        <option value="multiply">Multiply</option>
                                        <option value="screen">Screen</option>
                                        <option value="overlay">Overlay</option>
                                        <option value="soft-light">Soft Light</option>
                                        <option value="hard-light">Hard Light</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-square"></i> Border & Shape
                            </div>

                            <div class="form-group">
                                <label for="borderWidth">Border Width:</label>
                                <div class="range-container">
                                    <input type="range" id="borderWidth" min="0" max="10" value="0">
                                    <span id="borderWidthValue" class="range-value">0px</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="borderColor">Border Color:</label>
                                <input type="color" id="borderColor" value="#4facfe">
                            </div>

                            <div class="form-group">
                                <label for="borderStyle">Border Style:</label>
                                <select id="borderStyle">
                                    <option value="solid">Solid</option>
                                    <option value="dashed">Dashed</option>
                                    <option value="dotted">Dotted</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="cornerRadius">Corner Radius:</label>
                                <div class="range-container">
                                    <input type="range" id="cornerRadius" min="0" max="30" value="0">
                                    <span id="cornerRadiusValue" class="range-value">0px</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Effects Tab -->
                    <div id="effects-panel" class="tab-panel" role="tabpanel" aria-labelledby="effects-tab" style="display: none;">
                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-magic"></i> Text Effects
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="textShadow" checked>
                                <label for="textShadow">Text Shadow</label>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="shadowColor">Shadow Color:</label>
                                    <input type="color" id="shadowColor" value="#000000">
                                </div>
                                <div>
                                    <label for="shadowBlur">Shadow Blur:</label>
                                    <div class="range-container">
                                        <input type="range" id="shadowBlur" min="0" max="20" value="4">
                                        <span id="shadowBlurValue" class="range-value">4px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="shadowOffsetX">Shadow X:</label>
                                    <div class="range-container">
                                        <input type="range" id="shadowOffsetX" min="-10" max="10" value="2">
                                        <span id="shadowOffsetXValue" class="range-value">2px</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="shadowOffsetY">Shadow Y:</label>
                                    <div class="range-container">
                                        <input type="range" id="shadowOffsetY" min="-10" max="10" value="2">
                                        <span id="shadowOffsetYValue" class="range-value">2px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="textStroke">
                                <label for="textStroke">Text Outline</label>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="strokeColor">Outline Color:</label>
                                    <input type="color" id="strokeColor" value="#000000">
                                </div>
                                <div>
                                    <label for="strokeWidth">Outline Width:</label>
                                    <div class="range-container">
                                        <input type="range" id="strokeWidth" min="1" max="8" value="2">
                                        <span id="strokeWidthValue" class="range-value">2px</span>
                                    </div>
                                </div>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="textGlow">
                                <label for="textGlow">Text Glow</label>
                            </div>

                            <div class="form-row">
                                <div>
                                    <label for="glowColor">Glow Color:</label>
                                    <input type="color" id="glowColor" value="#4facfe">
                                </div>
                                <div>
                                    <label for="glowIntensity">Glow Intensity:</label>
                                    <div class="range-container">
                                        <input type="range" id="glowIntensity" min="0" max="20" value="10">
                                        <span id="glowIntensityValue" class="range-value">10px</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tool-group">
                            <div class="tool-group-header">
                                <i class="fas fa-sparkles"></i> Special Effects
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="hologram">
                                <label for="hologram">Hologram Effect</label>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="neon">
                                <label for="neon">Neon Effect</label>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="metallic">
                                <label for="metallic">Metallic Effect</label>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="chrome">
                                <label for="chrome">Chrome Effect</label>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="rainbow">
                                <label for="rainbow">Rainbow Effect</label>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="glitch">
                                <label for="glitch">Glitch Effect</label>
                            </div>

                            <div class="form-group">
                                <label for="effectIntensity">Effect Intensity:</label>
                                <div class="range-container">
                                    <input type="range" id="effectIntensity" min="0" max="100" value="50">
                                    <span id="effectIntensityValue" class="range-value">50%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Canvas Area -->
            <div class="main-canvas">
                <div class="canvas-header">
                    <h2><i class="fas fa-eye"></i> Live Preview</h2>
                </div>

                <div class="preview-area">
                    <div class="preview-container">
                        <div class="preview-row">
                            <div class="preview-item">
                                <span class="preview-label">Checkpoint 1</span>
                                <canvas id="previewCanvas1" class="preview-canvas" width="300" height="50"></canvas>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Checkpoint 10</span>
                                <canvas id="previewCanvas10" class="preview-canvas" width="300" height="50"></canvas>
                            </div>
                        </div>
                        <div class="preview-row">
                            <div class="preview-item">
                                <span class="preview-label">Checkpoint 50</span>
                                <canvas id="previewCanvas50" class="preview-canvas" width="300" height="50"></canvas>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Checkpoint 100</span>
                                <canvas id="previewCanvas100" class="preview-canvas" width="300" height="50"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Signpack Configurator -->
                    <div class="tool-group" style="margin: 20px 0;">
                        <div class="tool-header" onclick="toggleTool(this)">
                            <i class="fas fa-cogs"></i>
                            <span>Signpack Configuration</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </div>
                        <div class="tool-content">
                            <div class="form-group">
                                <label for="signpackName">Signpack Name:</label>
                                <input type="text" id="signpackName" placeholder="My Custom Signpack" value="Checkpoint Signpack">
                            </div>

                            <div class="form-group">
                                <label for="numberFormat">CP Number Format:</label>
                                <select id="numberFormat">
                                    <option value="001" selected>001, 002, 003... (Zero-padded)</option>
                                    <option value="1">1, 2, 3... (Simple numbers)</option>
                                    <option value="CP001">CP001, CP002, CP003... (With CP prefix)</option>
                                    <option value="CP1">CP1, CP2, CP3... (CP + simple numbers)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="numberRange">Number Range:</label>
                                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px; align-items: center;">
                                    <div>
                                        <input type="number" id="startNumber" min="1" max="999" value="1" style="width: 100%;">
                                        <small style="color: #bdc3c7; font-size: 0.75em;">Start</small>
                                    </div>
                                    <span style="color: #bdc3c7;">to</span>
                                    <div>
                                        <input type="number" id="endNumber" min="1" max="999" value="100" style="width: 100%;">
                                        <small style="color: #bdc3c7; font-size: 0.75em;">End</small>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="customPrefix">File Prefix (optional):</label>
                                <input type="text" id="customPrefix" placeholder="e.g., MySignpack, RacingSigns, etc. (leave blank for just numbers)" maxlength="20" value="">
                                <small style="color: #bdc3c7; font-size: 0.75em; margin-top: 4px; display: block;">
                                    Helps organize files on CDN services. Leave blank for simple numbering (1.png, 2.png...)
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="numberSuffix">Number Suffix:</label>
                                <select id="numberSuffix">
                                    <option value="padded" selected>001, 002, 003... (Padded)</option>
                                    <option value="simple">1, 2, 3... (Simple)</option>
                                </select>
                                <small style="color: #bdc3c7; font-size: 0.75em; margin-top: 4px; display: block;">
                                    Example: "MyPrefix001.png" vs "MyPrefix1.png"
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="outputFormat">Output Options:</label>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="includePNG" checked disabled>
                                    <label for="includePNG">Include PNG files (required)</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="includeJSON" checked>
                                    <label for="includeJSON">Include settings JSON (for re-import)</label>
                                </div>
                            </div>

                            <div class="form-group" style="background: rgba(79, 172, 254, 0.1); padding: 12px; border-radius: 6px; border-left: 3px solid #4facfe;">
                                <small style="color: #4facfe; font-size: 0.85em;">
                                    <i class="fas fa-info-circle"></i> <strong>Note:</strong>
                                    Upload the generated PNG files to a web server for other players to see your custom signs.
                                    Try <strong>dashmap.live</strong> for easy drag & drop CDN hosting.
                                </small>
                            </div>
                        </div>
                    </div>

                    <div class="stats-panel">
                        <div class="stats-section">
                            <h4><i class="fas fa-info-circle"></i> Sign Info</h4>
                            <div class="stat-item">
                                <span class="stat-label">Format:</span>
                                <span class="stat-value" id="statFormat">6x1 (512×80)</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Font:</span>
                                <span class="stat-value" id="statFont">Rajdhani</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Effects:</span>
                                <span class="stat-value" id="statEffects">Shadow</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Background:</span>
                                <span class="stat-value" id="statBackground">Solid</span>
                            </div>
                        </div>

                        <div class="stats-section">
                            <h4><i class="fas fa-chart-bar"></i> Generation Stats</h4>
                            <div class="stat-item">
                                <span class="stat-label">Total Signs:</span>
                                <span class="stat-value">100</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">File Size:</span>
                                <span class="stat-value" id="statFileSize">~2MB</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Est. Time:</span>
                                <span class="stat-value" id="statTime">~30s</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Overlay -->
        <div class="progress-container" id="progressContainer">
            <div class="status" id="status">Ready to generate...</div>
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="download-section" id="downloadSection">
                <h3><i class="fas fa-check-circle"></i> Signpack Generated Successfully!</h3>
                <p>Your checkpoint signpack is ready for download and installation.</p>
                <button class="download-btn" id="downloadBtn"><i class="fas fa-download"></i> Download Signpack ZIP</button>

                <div style="margin-top: 20px; background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 8px; text-align: left;">
                    <h4 style="color: #4facfe; margin-bottom: 10px;"><i class="fas fa-info-circle"></i> Installation Instructions</h4>

                    <div style="margin-bottom: 15px;">
                        <strong style="color: #4facfe;">📦 Installation & Usage</strong>
                        <div style="font-size: 0.9em; margin-top: 8px;">
                            <p><strong>For Map Creators:</strong></p>
                            <ol style="margin-left: 15px; font-size: 0.85em;">
                                <li>Upload PNG files to a web server</li>
                                <li>Use the PNG URLs directly in Trackmania Map Editor</li>
                                <li>Test your map to ensure signs load correctly</li>
                            </ol>
                        </div>
                        <div style="font-size: 0.85em; margin-top: 8px; padding: 8px; background: rgba(79, 172, 254, 0.1); border-radius: 4px;">
                            <strong>💡 Note:</strong> Local PNG files work for you as the creator, but other players need web-hosted files to see your custom signs.
                        </div>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); padding: 10px; border-radius: 6px; border-left: 3px solid #4caf50;">
                        <strong style="color: #4caf50;">💡 Hosting Options:</strong>
                        <div style="font-size: 0.85em; margin-top: 8px;">
                            <p><strong>🚀 Recommended: Dashmap.live</strong> - Simple drag & drop CDN (perfect for signs)</p>
                            <p>Alternatively, use any web hosting service that provides direct file access</p>
                            <div style="margin-top: 8px; padding: 6px; background: rgba(79, 172, 254, 0.1); border-radius: 4px;">
                                <small><strong>💡 Tip:</strong> Test your PNG URLs in a browser before using them in Trackmania</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="script.js"></script>
    </body>
    </html>
